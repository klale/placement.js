var e={size:["height","width"],clientSize:["clientHeight","clientWidth"],offsetSize:["offsetHeight","offsetWidth"],maxSize:["maxHeight","maxWidth"],before:["top","left"],marginBefore:["marginTop","marginLeft"],after:["bottom","right"],marginAfter:["marginBottom","marginRight"],scrollOffset:["pageYOffset","pageXOffset"]};function t(e){return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}export default function(o,f,r,a,i){void 0===r&&(r="bottom"),void 0===a&&(a="center"),void 0===i&&(i={}),(f instanceof Element||f instanceof Range)&&(f=t(f.getBoundingClientRect()));var n=Object.assign({top:f.bottom,bottom:f.top,left:f.right,right:f.left},f),s={top:0,left:0,bottom:window.innerHeight,right:window.innerWidth};i.bound&&((i.bound instanceof Element||i.bound instanceof Range)&&(i.bound=t(i.bound.getBoundingClientRect())),Object.assign(s,i.bound));var l=getComputedStyle(o),b={},g={};for(var m in e)b[m]=e[m]["top"===r||"bottom"===r?0:1],g[m]=e[m]["top"===r||"bottom"===r?1:0];o.style.position="absolute",o.style.maxWidth="",o.style.maxHeight="";var d=parseInt(l[g.marginBefore]),p=parseInt(l[g.marginAfter]),c=d+p,u=s[g.after]-s[g.before]-c;o[g.offsetSize]>u&&(o.style[g.maxSize]=u+"px");var h=parseInt(l[b.marginBefore])+parseInt(l[b.marginAfter]),x=n[b.before]-s[b.before]-h,y=s[b.after]-n[b.after]-h;(r===b.before&&o[b.offsetSize]>x||r===b.after&&o[b.offsetSize]>y)&&(r=x>y?b.before:b.after);var z=r===b.before?x:y;o[b.offsetSize]>z&&(o.style[b.maxSize]=z+"px");var S=window[b.scrollOffset];r===b.before?(o.style[b.before]=S+n[b.before]-o[b.offsetSize]-h+"px",o.style[b.after]="auto"):(o.style[b.before]=S+n[b.after]+"px",o.style[b.after]="auto");var v=window[g.scrollOffset],w=function(e){return Math.max(s[g.before],Math.min(e,s[g.after]-o[g.offsetSize]-c))};switch(a){case"start":o.style[g.before]=v+w(n[g.before]-d)+"px",o.style[g.after]="auto";break;case"end":o.style[g.before]="auto",o.style[g.after]=v+w(document.documentElement[g.clientSize]-n[g.after]-p)+"px";break;default:var O=n[g.after]-n[g.before];o.style[g.before]=v+w(n[g.before]+O/2-o[g.offsetSize]/2-d)+"px",o.style[g.after]="auto"}o.dataset.side=r,o.dataset.align=a}
