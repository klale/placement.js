"use strict";var NAMES={size:["height","width"],clientSize:["clientHeight","clientWidth"],offsetSize:["offsetHeight","offsetWidth"],maxSize:["maxHeight","maxWidth"],before:["top","left"],marginBefore:["marginTop","marginLeft"],after:["bottom","right"],marginAfter:["marginBottom","marginRight"],scrollOffset:["pageYOffset","pageXOffset"]};function normalizeRect(e){return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}function index(e,t,o,r,f){void 0===o&&(o="bottom"),void 0===r&&(r="center"),void 0===f&&(f={}),(t instanceof Element||t instanceof Range)&&(t=normalizeRect(t.getBoundingClientRect()));var i=Object.assign({top:t.bottom,bottom:t.top,left:t.right,right:t.left},t),a={top:0,left:0,bottom:window.innerHeight,right:window.innerWidth};f.bound&&((f.bound instanceof Element||f.bound instanceof Range)&&(f.bound=normalizeRect(f.bound.getBoundingClientRect())),Object.assign(a,f.bound));var n=getComputedStyle(e),s={},l={};for(var m in NAMES)s[m]=NAMES[m]["top"===o||"bottom"===o?0:1],l[m]=NAMES[m]["top"===o||"bottom"===o?1:0];e.style.position="absolute",e.style.maxWidth="",e.style.maxHeight="";var b=parseInt(n[l.marginBefore]),g=parseInt(n[l.marginAfter]),d=b+g,c=a[l.after]-a[l.before]-d;e[l.offsetSize]>c&&(e.style[l.maxSize]=c+"px");var p=parseInt(n[s.marginBefore])+parseInt(n[s.marginAfter]),u=i[s.before]-a[s.before]-p,h=a[s.after]-i[s.after]-p;(o===s.before&&e[s.offsetSize]>u||o===s.after&&e[s.offsetSize]>h)&&(o=u>h?s.before:s.after);var x=o===s.before?u:h;e[s.offsetSize]>x&&(e.style[s.maxSize]=x+"px");var S=window[s.scrollOffset];o===s.before?(e.style[s.before]=S+i[s.before]-e[s.offsetSize]-p+"px",e.style[s.after]="auto"):(e.style[s.before]=S+i[s.after]+"px",e.style[s.after]="auto");var z=window[l.scrollOffset],y=function(t){return Math.max(a[l.before],Math.min(t,a[l.after]-e[l.offsetSize]-d))};switch(r){case"start":e.style[l.before]=z+y(i[l.before]-b)+"px",e.style[l.after]="auto";break;case"end":e.style[l.before]="auto",e.style[l.after]=z+y(document.documentElement[l.clientSize]-i[l.after]-g)+"px";break;default:var v=i[l.after]-i[l.before];e.style[l.before]=z+y(i[l.before]+v/2-e[l.offsetSize]/2-b)+"px",e.style[l.after]="auto"}e.dataset.side=o,e.dataset.align=r}module.exports=index;
